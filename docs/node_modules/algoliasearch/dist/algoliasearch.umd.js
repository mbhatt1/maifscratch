/*! algoliasearch.umd.js | 4.25.0 | Â© Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){"use strict";function e(e,t,r,n,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(a,o){var i=t.apply(r,n);function u(t){e(i,a,o,u,s,"next",t)}function s(t){e(i,a,o,u,s,"throw",t)}u(void 0)}))}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){var t,r="algoliasearch-client-js-".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||"{}")},o=function(e){n().setItem(r,JSON.stringify(e))},u=function(){var t=e.timeToLive?1e3*e.timeToLive:null,r=a(),n=Object.fromEntries(Object.entries(r).filter((function(e){return void 0!==i(e,2)[1].timestamp})));if(o(n),t){var u=Object.fromEntries(Object.entries(n).filter((function(e){var r=i(e,2)[1],n=(new Date).getTime();return!(r.timestamp+t<n)})));o(u)}};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){u();var t=JSON.stringify(e);return a()[t]})).then((function(e){return Promise.all([e?e.value:t(),void 0!==e])})).then((function(e){var t=i(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]={timestamp:(new Date).getTime(),value:t},n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function c(e){var t=u(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,a).catch((function(){return c({caches:t}).get(e,n,a)}))},set:function(e,n){return r.set(e,n).catch((function(){return c({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return c({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return c({caches:t}).clear()}))}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var i=n(),u=a&&a.miss||function(){return Promise.resolve()};return i.then((function(e){return u(e)})).then((function(){return i}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function d(e,t,r){var n={"x-algolia-api-key":r,"x-algolia-application-id":t};return{headers:function(){return e===y.WithinHeaders?n:{}},queryParameters:function(){return e===y.WithinQueryParameters?n:{}}}}function l(e){var t=0;return e((function r(){return t++,new Promise((function(n){setTimeout((function(){n(e(r))}),Math.min(100*t,1e3))}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(r){return h(e.then((function(e){return Promise.all([t(e,r),e])})).then((function(e){return e[1]})))}})}function p(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function m(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function g(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[a++])}))}var y={WithinQueryParameters:0,WithinHeaders:1};function v(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var b={Read:1,Write:2,Any:3},w=1,P=2,x=3;function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return a(a({},e),{},{status:t,lastUpdate:Date.now()})}function I(e){return"string"==typeof e?{protocol:"https",url:e,accept:b.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||b.Any}}var j="DELETE",q="GET",D="POST",k="PUT";function T(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(O(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===w||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===x&&Date.now()-e.lastUpdate<=12e4}(e)})),a=[].concat(u(r),u(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:a.length>0?a.map((function(e){return I(e)})):t}}))}function S(e,t,r,n){var o=[],i=function(e,t){if(e.method===q||void 0===e.data&&void 0===t.data)return;var r=Array.isArray(e.data)?e.data:a(a({},e.data),t.data);return JSON.stringify(r)}(r,n),s=function(e,t){var r=a(a({},e.headers),t.headers),n={};return Object.keys(r).forEach((function(e){var t=r[e];n[e.toLowerCase()]=t})),n}(e,n),c=r.method,f=r.method!==q?{}:a(a({},r.data),n.data),d=a(a(a({"x-algolia-agent":e.userAgent.value},e.queryParameters),f),n.queryParameters),l=0,h=function t(a,u){var f=a.pop();if(void 0===f)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:C(o)};var h={data:i,headers:s,method:c,url:R(f,r.path,d),connectTimeout:u(l,e.timeouts.connect),responseTimeout:u(l,n.timeout)},p=function(e){var t={request:h,response:e,host:f,triesLeft:a.length};return o.push(t),t},m={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var n=p(r);return r.isTimedOut&&l++,Promise.all([e.logger.info("Retryable failure",U(n)),e.hostsCache.set(f,O(f,r.isTimedOut?x:P))]).then((function(){return t(a,u)}))},onFail:function(e){throw p(e),function(e,t){var r=e.content,n=e.status,a=r;try{a=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:"ApiError",message:e,status:t,transporterStackTrace:r}}(a,n,t)}(e,C(o))}};return e.requester.send(h).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,m)}))};return T(e.hostsCache,t).then((function(e){return h(u(e.statelessHosts).reverse(),e.getTimeout)}))}function N(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,o=e.responsesCache,u=e.timeouts,s=e.userAgent,c=e.hosts,f=e.queryParameters,d={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:o,timeouts:u,userAgent:s,headers:e.headers,queryParameters:f,hosts:c.map((function(e){return I(e)})),read:function(e,t){var r=v(t,d.timeouts.read),n=function(){return S(d,d.hosts.filter((function(e){return 0!=(e.accept&b.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:d.queryParameters,headers:d.headers}};return d.responsesCache.get(a,(function(){return d.requestsCache.get(a,(function(){return d.requestsCache.set(a,n()).then((function(e){return Promise.all([d.requestsCache.delete(a),e])}),(function(e){return Promise.all([d.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=i(e,2);t[0];return t[1]}))}))}),{miss:function(e){return d.responsesCache.set(a,e)}})},write:function(e,t){return S(d,d.hosts.filter((function(e){return 0!=(e.accept&b.Write)})),e,v(t,d.timeouts.write))}};return d}function E(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var r="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(r)&&(t.value="".concat(t.value).concat(r)),t}};return t}function R(e,t,r){var n=A(r),a="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return n.length&&(a+="?".concat(n)),a}function A(e){return Object.keys(e).map((function(t){return g("%s=%s",t,(r=e[t],"[object Object]"===Object.prototype.toString.call(r)||"[object Array]"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join("&")}function C(e){return e.map((function(e){return U(e)}))}function U(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return a(a({},e),{},{request:a(a({},e.request),{},{headers:a(a({},e.request.headers),t)})})}var z=function(e){return function(t,r){return e.transporter.write({method:D,path:"2/abtests",data:t},r)}},J=function(e){return function(t,r){return e.transporter.write({method:j,path:g("2/abtests/%s",t)},r)}},F=function(e){return function(t,r){return e.transporter.read({method:q,path:g("2/abtests/%s",t)},r)}},W=function(e){return function(t){return e.transporter.read({method:q,path:"2/abtests"},t)}},H=function(e){return function(t,r){return e.transporter.write({method:D,path:g("2/abtests/%s/stop",t)},r)}},K=function(e){return function(t){return e.transporter.read({method:q,path:"1/strategies/personalization"},t)}},M=function(e){return function(t,r){return e.transporter.write({method:D,path:"1/strategies/personalization",data:t},r)}};function B(e){return function t(r){return e.request(r).then((function(n){if(void 0!==e.batch&&e.batch(n.hits),!e.shouldStop(n))return n.cursor?t({cursor:n.cursor}):t({page:(r.page||0)+1})}))}({})}var G=function(e){return function(t,r){var n=r||{},i=n.queryParameters,u=o(n,["queryParameters"]),s=a({acl:t},void 0!==i?{queryParameters:i}:{});return h(e.transporter.write({method:D,path:"1/keys",data:s},u),(function(t,r){return l((function(n){return re(e)(t.key,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},L=function(e){return function(t,r,n){var a=v(n);return a.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:D,path:"1/clusters/mapping",data:{cluster:r}},a)}},Q=function(e){return function(t,r,n){return e.transporter.write({method:D,path:"1/clusters/mapping/batch",data:{users:t,cluster:r}},n)}},V=function(e){return function(t,r){return h(e.transporter.write({method:D,path:g("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},r),(function(t,r){return De(e)(t.taskID,r)}))}},_=function(e){return function(t,r,n){return h(e.transporter.write({method:D,path:g("1/indexes/%s/operation",t),data:{operation:"copy",destination:r}},n),(function(r,n){return ce(e)(t,{methods:{waitTask:ht}}).waitTask(r.taskID,n)}))}},X=function(e){return function(t,r,n){return _(e)(t,r,a(a({},n),{},{scope:[mt.Rules]}))}},Y=function(e){return function(t,r,n){return _(e)(t,r,a(a({},n),{},{scope:[mt.Settings]}))}},Z=function(e){return function(t,r,n){return _(e)(t,r,a(a({},n),{},{scope:[mt.Synonyms]}))}},$=function(e){return function(t,r){return t.method===q?e.transporter.read(t,r):e.transporter.write(t,r)}},ee=function(e){return function(t,r){return h(e.transporter.write({method:j,path:g("1/keys/%s",t)},r),(function(r,n){return l((function(r){return re(e)(t,n).then(r).catch((function(e){if(404!==e.status)throw e}))}))}))}},te=function(e){return function(t,r,n){var a=r.map((function(e){return{action:"deleteEntry",body:{objectID:e}}}));return h(e.transporter.write({method:D,path:g("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},n),(function(t,r){return De(e)(t.taskID,r)}))}},re=function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/keys/%s",t)},r)}},ne=function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/task/%s",t.toString())},r)}},ae=function(e){return function(t){return e.transporter.read({method:q,path:"/1/dictionaries/*/settings"},t)}},oe=function(e){return function(t){return e.transporter.read({method:q,path:"1/logs"},t)}},ie=function(e){return function(t){return e.transporter.read({method:q,path:"1/clusters/mapping/top"},t)}},ue=function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/clusters/mapping/%s",t)},r)}},se=function(e){return function(t){var r=t||{},n=r.retrieveMappings,a=o(r,["retrieveMappings"]);return!0===n&&(a.getClusters=!0),e.transporter.read({method:q,path:"1/clusters/mapping/pending"},a)}},ce=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return m(n,r.methods)}},fe=function(e){return function(t){return e.transporter.read({method:q,path:"1/keys"},t)}},de=function(e){return function(t){return e.transporter.read({method:q,path:"1/clusters"},t)}},le=function(e){return function(t){return e.transporter.read({method:q,path:"1/indexes"},t)}},he=function(e){return function(t){return e.transporter.read({method:q,path:"1/clusters/mapping"},t)}},pe=function(e){return function(t,r,n){return h(e.transporter.write({method:D,path:g("1/indexes/%s/operation",t),data:{operation:"move",destination:r}},n),(function(r,n){return ce(e)(t,{methods:{waitTask:ht}}).waitTask(r.taskID,n)}))}},me=function(e){return function(t,r){return h(e.transporter.write({method:D,path:"1/indexes/*/batch",data:{requests:t}},r),(function(t,r){return Promise.all(Object.keys(t.taskID).map((function(n){return ce(e)(n,{methods:{waitTask:ht}}).waitTask(t.taskID[n],r)})))}))}},ge=function(e){return function(t,r){return e.transporter.read({method:D,path:"1/indexes/*/objects",data:{requests:t}},r)}},ye=function(e){return function(t,r){var n=t.map((function(e){return a(a({},e),{},{params:A(e.params||{})})}));return e.transporter.read({method:D,path:"1/indexes/*/queries",data:{requests:n},cacheable:!0},r)}},ve=function(e){return function(t,r){return Promise.all(t.map((function(t){var n=t.params,i=n.facetName,u=n.facetQuery,s=o(n,["facetName","facetQuery"]);return ce(e)(t.indexName,{methods:{searchForFacetValues:ct}}).searchForFacetValues(i,u,a(a({},r),s))})))}},be=function(e){return function(t,r){var n=v(r);return n.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:j,path:"1/clusters/mapping"},n)}},we=function(e){return function(t,r,n){var a=r.map((function(e){return{action:"addEntry",body:e}}));return h(e.transporter.write({method:D,path:g("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:a}},n),(function(t,r){return De(e)(t.taskID,r)}))}},Pe=function(e){return function(t,r){return h(e.transporter.write({method:D,path:g("1/keys/%s/restore",t)},r),(function(r,n){return l((function(r){return re(e)(t,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},xe=function(e){return function(t,r,n){var a=r.map((function(e){return{action:"addEntry",body:e}}));return h(e.transporter.write({method:D,path:g("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},n),(function(t,r){return De(e)(t.taskID,r)}))}},Oe=function(e){return function(t,r,n){return e.transporter.read({method:D,path:g("/1/dictionaries/%s/search",t),data:{query:r},cacheable:!0},n)}},Ie=function(e){return function(t,r){return e.transporter.read({method:D,path:"1/clusters/mapping/search",data:{query:t}},r)}},je=function(e){return function(t,r){return h(e.transporter.write({method:k,path:"/1/dictionaries/*/settings",data:t},r),(function(t,r){return De(e)(t.taskID,r)}))}},qe=function(e){return function(t,r){var n=Object.assign({},r),a=r||{},i=a.queryParameters,u=o(a,["queryParameters"]),s=i?{queryParameters:i}:{},c=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return h(e.transporter.write({method:k,path:g("1/keys/%s",t),data:s},u),(function(r,a){return l((function(r){return re(e)(t,a).then((function(e){return function(e){return Object.keys(n).filter((function(e){return-1!==c.indexOf(e)})).every((function(t){if(Array.isArray(e[t])&&Array.isArray(n[t])){var r=e[t];return r.length===n[t].length&&r.every((function(e,r){return e===n[t][r]}))}return e[t]===n[t]}))}(e)?Promise.resolve():r()}))}))}))}},De=function(e){return function(t,r){return l((function(n){return ne(e)(t,r).then((function(e){return"published"!==e.status?n():void 0}))}))}},ke=function(e){return function(t,r){return h(e.transporter.write({method:D,path:g("1/indexes/%s/batch",e.indexName),data:{requests:t}},r),(function(t,r){return ht(e)(t.taskID,r)}))}},Te=function(e){return function(t){return B(a(a({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(r){return e.transporter.read({method:D,path:g("1/indexes/%s/browse",e.indexName),data:r},t)}}))}},Se=function(e){return function(t){var r=a({hitsPerPage:1e3},t);return B(a(a({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return ft(e)("",a(a({},r),t)).then((function(e){return a(a({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Ne=function(e){return function(t){var r=a({hitsPerPage:1e3},t);return B(a(a({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return dt(e)("",a(a({},r),t)).then((function(e){return a(a({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Ee=function(e){return function(t,r,n){var a=n||{},i=a.batchSize,u=o(a,["batchSize"]),s={taskIDs:[],objectIDs:[]};return h(function n(){var a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=[];for(a=o;a<t.length&&(c.push(t[a]),c.length!==(i||1e3));a++);return 0===c.length?Promise.resolve(s):ke(e)(c.map((function(e){return{action:r,body:e}})),u).then((function(e){return s.objectIDs=s.objectIDs.concat(e.objectIDs),s.taskIDs.push(e.taskID),a++,n(a)}))}(),(function(t,r){return Promise.all(t.taskIDs.map((function(t){return ht(e)(t,r)})))}))}},Re=function(e){return function(t){return h(e.transporter.write({method:D,path:g("1/indexes/%s/clear",e.indexName)},t),(function(t,r){return ht(e)(t.taskID,r)}))}},Ae=function(e){return function(t){var r=t||{},n=r.forwardToReplicas,a=v(o(r,["forwardToReplicas"]));return n&&(a.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:D,path:g("1/indexes/%s/rules/clear",e.indexName)},a),(function(t,r){return ht(e)(t.taskID,r)}))}},Ce=function(e){return function(t){var r=t||{},n=r.forwardToReplicas,a=v(o(r,["forwardToReplicas"]));return n&&(a.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:D,path:g("1/indexes/%s/synonyms/clear",e.indexName)},a),(function(t,r){return ht(e)(t.taskID,r)}))}},Ue=function(e){return function(t,r){return h(e.transporter.write({method:D,path:g("1/indexes/%s/deleteByQuery",e.indexName),data:t},r),(function(t,r){return ht(e)(t.taskID,r)}))}},ze=function(e){return function(t){return h(e.transporter.write({method:j,path:g("1/indexes/%s",e.indexName)},t),(function(t,r){return ht(e)(t.taskID,r)}))}},Je=function(e){return function(t,r){return h(Fe(e)([t],r).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,r){return ht(e)(t.taskID,r)}))}},Fe=function(e){return function(t,r){var n=t.map((function(e){return{objectID:e}}));return Ee(e)(n,pt.DeleteObject,r)}},We=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,i=v(o(n,["forwardToReplicas"]));return a&&(i.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:j,path:g("1/indexes/%s/rules/%s",e.indexName,t)},i),(function(t,r){return ht(e)(t.taskID,r)}))}},He=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,i=v(o(n,["forwardToReplicas"]));return a&&(i.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:j,path:g("1/indexes/%s/synonyms/%s",e.indexName,t)},i),(function(t,r){return ht(e)(t.taskID,r)}))}},Ke=function(e){return function(t){return _e(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},Me=function(e){return function(t,r,n){return e.transporter.read({method:D,path:g("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},Be=function(e){return function(t,r){var n=r||{},u=n.query,s=n.paginate,c=o(n,["query","paginate"]),f=0;return function r(){return st(e)(u||"",a(a({},c),{},{page:f})).then((function(e){for(var n=0,a=Object.entries(e.hits);n<a.length;n++){var o=i(a[n],2),u=o[0],c=o[1];if(t(c))return{object:c,position:parseInt(u,10),page:f}}if(f++,!1===s||f>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return r()}))}()}},Ge=function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/indexes/%s/%s",e.indexName,t)},r)}},Le=function(){return function(e,t){for(var r=0,n=Object.entries(e.hits);r<n.length;r++){var a=i(n[r],2),o=a[0];if(a[1].objectID===t)return parseInt(o,10)}return-1}},Qe=function(e){return function(t,r){var n=r||{},i=n.attributesToRetrieve,u=o(n,["attributesToRetrieve"]),s=t.map((function(t){return a({indexName:e.indexName,objectID:t},i?{attributesToRetrieve:i}:{})}));return e.transporter.read({method:D,path:"1/indexes/*/objects",data:{requests:s}},u)}},Ve=function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/indexes/%s/rules/%s",e.indexName,t)},r)}},_e=function(e){return function(t){return e.transporter.read({method:q,path:g("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},Xe=function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/indexes/%s/synonyms/%s",e.indexName,t)},r)}},Ye=function(e){return function(t,r){return h(Ze(e)([t],r).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,r){return ht(e)(t.taskID,r)}))}},Ze=function(e){return function(t,r){var n=r||{},a=n.createIfNotExists,i=o(n,["createIfNotExists"]),u=a?pt.PartialUpdateObject:pt.PartialUpdateObjectNoCreate;return Ee(e)(t,u,i)}},$e=function(e){return function(t,r){var n=r||{},s=n.safe,c=n.autoGenerateObjectIDIfNotExist,f=n.batchSize,d=o(n,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),l=function(t,r,n,a){return h(e.transporter.write({method:D,path:g("1/indexes/%s/operation",t),data:{operation:n,destination:r}},a),(function(t,r){return ht(e)(t.taskID,r)}))},p=Math.random().toString(36).substring(7),m="".concat(e.indexName,"_tmp_").concat(p),y=nt({appId:e.appId,transporter:e.transporter,indexName:m}),v=[],b=l(e.indexName,m,"copy",a(a({},d),{},{scope:["settings","synonyms","rules"]}));return v.push(b),h((s?b.wait(d):b).then((function(){var e=y(t,a(a({},d),{},{autoGenerateObjectIDIfNotExist:c,batchSize:f}));return v.push(e),s?e.wait(d):e})).then((function(){var t=l(m,e.indexName,"move",d);return v.push(t),s?t.wait(d):t})).then((function(){return Promise.all(v)})).then((function(e){var t=i(e,3),r=t[0],n=t[1],a=t[2];return{objectIDs:n.objectIDs,taskIDs:[r.taskID].concat(u(n.taskIDs),[a.taskID])}})),(function(e,t){return Promise.all(v.map((function(e){return e.wait(t)})))}))}},et=function(e){return function(t,r){return ot(e)(t,a(a({},r),{},{clearExistingRules:!0}))}},tt=function(e){return function(t,r){return ut(e)(t,a(a({},r),{},{clearExistingSynonyms:!0}))}},rt=function(e){return function(t,r){return h(nt(e)([t],r).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,r){return ht(e)(t.taskID,r)}))}},nt=function(e){return function(t,r){var n=r||{},a=n.autoGenerateObjectIDIfNotExist,i=o(n,["autoGenerateObjectIDIfNotExist"]),u=a?pt.AddObject:pt.UpdateObject;if(u===pt.UpdateObject){var s=!0,c=!1,f=void 0;try{for(var d,l=t[Symbol.iterator]();!(s=(d=l.next()).done);s=!0){if(void 0===d.value.objectID)return h(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}}catch(e){c=!0,f=e}finally{try{s||null==l.return||l.return()}finally{if(c)throw f}}}return Ee(e)(t,u,i)}},at=function(e){return function(t,r){return ot(e)([t],r)}},ot=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,i=n.clearExistingRules,u=v(o(n,["forwardToReplicas","clearExistingRules"]));return a&&(u.queryParameters.forwardToReplicas=1),i&&(u.queryParameters.clearExistingRules=1),h(e.transporter.write({method:D,path:g("1/indexes/%s/rules/batch",e.indexName),data:t},u),(function(t,r){return ht(e)(t.taskID,r)}))}},it=function(e){return function(t,r){return ut(e)([t],r)}},ut=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,i=n.clearExistingSynonyms,u=n.replaceExistingSynonyms,s=v(o(n,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return a&&(s.queryParameters.forwardToReplicas=1),(u||i)&&(s.queryParameters.replaceExistingSynonyms=1),h(e.transporter.write({method:D,path:g("1/indexes/%s/synonyms/batch",e.indexName),data:t},s),(function(t,r){return ht(e)(t.taskID,r)}))}},st=function(e){return function(t,r){return e.transporter.read({method:D,path:g("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r)}},ct=function(e){return function(t,r,n){return e.transporter.read({method:D,path:g("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},ft=function(e){return function(t,r){return e.transporter.read({method:D,path:g("1/indexes/%s/rules/search",e.indexName),data:{query:t}},r)}},dt=function(e){return function(t,r){return e.transporter.read({method:D,path:g("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},r)}},lt=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,i=v(o(n,["forwardToReplicas"]));return a&&(i.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:k,path:g("1/indexes/%s/settings",e.indexName),data:t},i),(function(t,r){return ht(e)(t.taskID,r)}))}},ht=function(e){return function(t,r){return l((function(n){return function(e){return function(t,r){return e.transporter.read({method:q,path:g("1/indexes/%s/task/%s",e.indexName,t.toString())},r)}}(e)(t,r).then((function(e){return"published"!==e.status?n():void 0}))}))}},pt={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},mt={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},gt=1,yt=2,vt=3;var bt=function(e){return function(t,r){var n=t.map((function(e){return a(a({},e),{},{threshold:e.threshold||0})}));return e.transporter.read({method:D,path:"1/indexes/*/recommendations",data:{requests:n},cacheable:!0},r)}},wt=function(e){return function(t,r){return bt(e)(t.map((function(e){return a(a({},e),{},{fallbackParameters:{},model:"bought-together"})})),r)}},Pt=function(e){return function(t,r){return bt(e)(t.map((function(e){return a(a({},e),{},{model:"related-products"})})),r)}},xt=function(e){return function(t,r){var n=t.map((function(e){return a(a({},e),{},{model:"trending-facets",threshold:e.threshold||0})}));return e.transporter.read({method:D,path:"1/indexes/*/recommendations",data:{requests:n},cacheable:!0},r)}},Ot=function(e){return function(t,r){var n=t.map((function(e){return a(a({},e),{},{model:"trending-items",threshold:e.threshold||0})}));return e.transporter.read({method:D,path:"1/indexes/*/recommendations",data:{requests:n},cacheable:!0},r)}},It=function(e){return function(t,r){return bt(e)(t.map((function(e){return a(a({},e),{},{model:"looking-similar"})})),r)}},jt=function(e){return function(t,r){var n=t.map((function(e){return a(a({},e),{},{model:"recommended-for-you",threshold:e.threshold||0})}));return e.transporter.read({method:D,path:"1/indexes/*/recommendations",data:{requests:n},cacheable:!0},r)}};function qt(e,r){return function(){var n=t(regeneratorRuntime.mark((function t(n,a){var i,u,s,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new Error("`options.transformation.region` must be provided at client instantiation before calling this method.");case 2:return u=(i=a||{}).autoGenerateObjectIDIfNotExist,s=i.watch,c=o(i,["autoGenerateObjectIDIfNotExist","watch"]),f=u?pt.AddObject:pt.UpdateObject,t.next=6,r.push({indexName:e,pushTaskPayload:{action:f,records:n},watch:s},c);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,t){return n.apply(this,arguments)}}()}function Dt(e,r){return function(){var n=t(regeneratorRuntime.mark((function t(n,a){var i,u,s,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new Error("`options.transformation.region` must be provided at client instantiation before calling this method.");case 2:return u=(i=a||{}).createIfNotExists,s=i.watch,c=o(i,["createIfNotExists","watch"]),f=u?pt.PartialUpdateObject:pt.PartialUpdateObjectNoCreate,t.next=6,r.push({indexName:e,pushTaskPayload:{action:f,records:n},watch:s},c);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,t){return n.apply(this,arguments)}}()}function kt(e,r,n){var o,i,u={appId:e,apiKey:r,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,a=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},o=a(e.connectTimeout,"Connection timeout");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(o),n=a(e.responseTimeout,"Socket timeout"))},r.onerror=function(){0===r.status&&(clearTimeout(o),clearTimeout(n),t({content:r.responseText||"Network request failed",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(o),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=vt,{debug:function(e,t){return gt>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return yt>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:f(),requestsCache:f({serializable:!1}),hostsCache:c({caches:[s({key:"".concat("4.25.0","-").concat(e)}),f()]}),userAgent:E("4.25.0").add({segment:"Browser"})},l=a(a({},u),n),h=function(){return function(e){return function(e){var t=e.region||"us",r=d(y.WithinHeaders,e.appId,e.apiKey),n=N(a(a({hosts:[{url:"personalization.".concat(t,".algolia.com")}]},e),{},{headers:a(a(a({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:a(a({},r.queryParameters()),e.queryParameters)}));return m({appId:e.appId,transporter:n},e.methods)}(a(a(a({},u),e),{},{methods:{getPersonalizationStrategy:K,setPersonalizationStrategy:M}}))}};if(n&&n.transformation){if(!n.transformation.region)throw new Error("`region` must be provided when leveraging the transformation pipeline");i=function(e){if(!e||!e.transformation||!e.transformation.region)throw new Error("`region` must be provided when leveraging the transformation pipeline");if("eu"!==e.transformation.region&&"us"!==e.transformation.region)throw new Error("`region` is required and must be one of the following: eu, us");var r=e.appId,n=d(y.WithinHeaders,r,e.apiKey),o=N(a(a({hosts:[{url:"data.".concat(e.transformation.region,".algolia.com"),accept:b.ReadWrite,protocol:"https"}]},e),{},{headers:a(a(a({},n.headers()),{"content-type":"text/plain"}),e.headers),queryParameters:a(a({},n.queryParameters()),e.queryParameters)}));return{transporter:o,appId:r,addAlgoliaAgent:function(e,t){o.userAgent.add({segment:e,version:t}),o.userAgent.add({segment:"Ingestion",version:t}),o.userAgent.add({segment:"Ingestion via Algoliasearch"})},clearCache:function(){return Promise.all([o.requestsCache.clear(),o.responsesCache.clear()]).then((function(){}))},push:function(e,r){return t(regeneratorRuntime.mark((function t(){var n,i,u,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.indexName,i=e.pushTaskPayload,u=e.watch,n){t.next=3;break}throw new Error("Parameter `indexName` is required when calling `push`.");case 3:if(i){t.next=5;break}throw new Error("Parameter `pushTaskPayload` is required when calling `push`.");case 5:if(i.action){t.next=7;break}throw new Error("Parameter `pushTaskPayload.action` is required when calling `push`.");case 7:if(i.records){t.next=9;break}throw new Error("Parameter `pushTaskPayload.records` is required when calling `push`.");case 9:return s=r||{queryParameters:{}},t.next=12,o.write({method:D,path:g("1/push/%s",n),data:i},a(a({},s),{},{queryParameters:a(a({},s.queryParameters),{},{watch:void 0!==u})}));case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})))()}}}(a(a({},n),u))}return function(e){var t=e.appId,r=d(void 0!==e.authMode?e.authMode:y.WithinHeaders,t,e.apiKey),n=N(a(a({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:b.Read},{url:"".concat(t,".algolia.net"),accept:b.Write}].concat(p([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:a(a(a({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:a(a({},r.queryParameters()),e.queryParameters)}));return m({transporter:n,appId:t,addAlgoliaAgent:function(e,t){n.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([n.requestsCache.clear(),n.responsesCache.clear()]).then((function(){}))}},e.methods)}(a(a({},l),{},{methods:{search:ye,searchForFacetValues:ve,multipleBatch:me,multipleGetObjects:ge,multipleQueries:ye,copyIndex:_,copySettings:Y,copySynonyms:Z,copyRules:X,moveIndex:pe,listIndices:le,getLogs:oe,listClusters:de,multipleSearchForFacetValues:ve,getApiKey:re,addApiKey:G,listApiKeys:fe,updateApiKey:qe,deleteApiKey:ee,restoreApiKey:Pe,assignUserID:L,assignUserIDs:Q,getUserID:ue,searchUserIDs:Ie,listUserIDs:he,getTopUserIDs:ie,removeUserID:be,hasPendingMappings:se,clearDictionaryEntries:V,deleteDictionaryEntries:te,getDictionarySettings:ae,getAppTask:ne,replaceDictionaryEntries:we,saveDictionaryEntries:xe,searchDictionaryEntries:Oe,setDictionarySettings:je,waitAppTask:De,customRequest:$,initIndex:function(e){return function(t){return a(a({},ce(e)(t,{methods:{batch:ke,delete:ze,findAnswers:Me,getObject:Ge,getObjects:Qe,saveObject:rt,saveObjects:nt,search:st,searchForFacetValues:ct,waitTask:ht,setSettings:lt,getSettings:_e,partialUpdateObject:Ye,partialUpdateObjects:Ze,deleteObject:Je,deleteObjects:Fe,deleteBy:Ue,clearObjects:Re,browseObjects:Te,getObjectPosition:Le,findObject:Be,exists:Ke,saveSynonym:it,saveSynonyms:ut,getSynonym:Xe,searchSynonyms:dt,browseSynonyms:Ne,deleteSynonym:He,clearSynonyms:Ce,replaceAllObjects:$e,replaceAllSynonyms:tt,searchRules:ft,getRule:Ve,deleteRule:We,saveRule:at,saveRules:ot,replaceAllRules:et,browseRules:Se,clearRules:Ae}})),{},{saveObjectsWithTransformation:qt(t,i),partialUpdateObjectsWithTransformation:Dt(t,i)})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||"us",r=d(y.WithinHeaders,e.appId,e.apiKey),n=N(a(a({hosts:[{url:"analytics.".concat(t,".algolia.com")}]},e),{},{headers:a(a(a({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:a(a({},r.queryParameters()),e.queryParameters)}));return m({appId:e.appId,transporter:n},e.methods)}(a(a(a({},u),e),{},{methods:{addABTest:z,getABTest:F,getABTests:W,stopABTest:H,deleteABTest:J}}))}},initPersonalization:h,initRecommendation:function(){return function(e){return l.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),h()(e)}},getRecommendations:bt,getFrequentlyBoughtTogether:wt,getLookingSimilar:It,getRecommendedForYou:jt,getRelatedProducts:Pt,getTrendingFacets:xt,getTrendingItems:Ot}}))}return kt.version="4.25.0",kt}));
